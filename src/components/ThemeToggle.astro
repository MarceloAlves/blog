---
import Moon from '../icons/Moon.astro'
import Sun from '../icons/Sun.astro'
---

<button
  aria-label="Toggle theme"
  class="relative rounded bg-accent p-2 font-sans text-sm leading-none text-white shadow-md hover:bg-accent-dark active:top-[1px]"
  id="theme-toggle"
  title="Toggle theme"
>
  <span class="dark:hidden"><Sun size={14} /></span>
  <span class="hidden dark:inline"><Moon size={14} /></span>
</button>

<script>
  const THEME_STORAGE_KEY = 'kyleshevlin:theme'
  const btn = document.getElementById('theme-toggle')

  const toggleTheme = () => {
    const isDark = document.documentElement.classList.contains('dark')
    const nextStoredValue = isDark ? '' : 'dark'

    document.documentElement.classList.toggle('dark')
    localStorage.setItem(THEME_STORAGE_KEY, nextStoredValue)
  }

  btn?.addEventListener('click', toggleTheme)
</script>
